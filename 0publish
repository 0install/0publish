#!/usr/bin/env python
from optparse import OptionParser
import os, sys

version = '0.1'

parser = OptionParser(usage="usage: %prog [options] interface")
parser.add_option("-V", "--version", help="display version information", action='store_true')

(options, args) = parser.parse_args()

if options.version:
	print "0publish (zero-install) " + version
	print "Copyright (C) 2005 Thomas Leonard"
	print "This program comes with ABSOLUTELY NO WARRANTY,"
	print "to the extent permitted by law."
	print "You may redistribute copies of this program"
	print "under the terms of the GNU General Public License."
	print "For more information about these matters, see the file named COPYING."
	sys.exit(0)

if len(args) != 1:
	parser.print_help()
	sys.exit(1)
interface = args[0]

def confirm(q):
	while True:
		ans = raw_input(q + " [Y/N] ").lower()
		if ans in ('y', 'yes'): return True
		if ans in ('n', 'no'): return False

if os.path.exists(interface):
	from update import update
	update(interface)
else:
	if confirm("Interface file '%s' does not exist. Create it?" % interface):
		from create import create
		create(interface)
